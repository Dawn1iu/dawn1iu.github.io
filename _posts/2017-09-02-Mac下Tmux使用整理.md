---
    author: Dawn1iu
    date: 2015-09-02
    layout: post
    title: Tmux使用整理
    categories:
    - 工具
    tags:
    - tmux
---
## Tmux使用整理

### 1 安装

mac下直接使用homebrew安装`brew install tmux`，这里不赘述具体安装过程。其他端也可以自己安装tmux。

### 2 tmux基本概念

在终端会话中输入tmux即可进入tmux进入tmux。
![](http://upload-images.jianshu.io/upload_images/7557064-275439d64442ae21.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

#### 2.1 控制台
图中绿色部分为控制台，默认`crtl+b`为快捷键前缀即`prefix`，后续命令输入基本都需先按快捷键前缀再按快捷键进行操作。

控制台右侧为机器名和当前时间、左侧`[]`内为当前tmux会话名，后面的`0:~*`为tmux窗口序号及位置，当需要在多个tmux窗口中切换的时候可根据`prefix + 窗口序号(数字)`进行切换。

#### 2.2 会话(session)
##### 2.2.1 新建会话
每次启动tmux都会创建一个新会话，但默认创建会话是以序号命名的。所以我们可以使用`tmux new -s <session-name>`来创建一个名字为session-name的会话。
##### 2.2.2 分离会话(detach)
退出tmux并关闭会话可以使用`exit`或者`crtl + d`。如果希望分离会话则可使用`[prefix] + [d]`。p.s.终端被直接管理tmux会默认被分离。
##### 2.2.3 连接会话(attach)
被分离的对话可以被重新链接，可使用`tmux attach -t <session-name> 或者简写 tmux a -t <session-name>`。
##### 2.2.4 其他
```
tmux ls //显示所有创建的会话
```

#### 2.3 窗口(window)
在一个tmux会话中可以有多个窗口，表现控制台下方序号标志的不同窗口。
##### 2.2.1 相关快捷键
```
[prefix] + 
	c // 创建一个新窗口
	& // 关闭当前窗口
	w // 列出所有的窗口选择
	p // 切换到上一个窗口
	n // 切换到下一个窗口
	窗口号(数字) // 使用窗口号切换窗口(例如窗口号为1的, 则C-b 1)
	, // 重命名当前窗口，便于识别各个窗口
	c // 创建新窗口
	& // 关闭当前窗口
```

#### 2.4 窗格/面板 (pane)
在一个tmux窗口中可以同时打开多个窗格进行分屏操作，个人认为这个功能在大屏上可以极大提升效率，同时当需要同时对多个窗口进行相同操作时也可以基于窗格进行。
##### 2.4.1 相关快捷键
```
[prefix]（e.g. [crtl+b]） + 
	” // 将当前面板平分为上下两块
	% // 将当前面板平分为左右两块
	方向键 // 移动光标以选择面板
	x // 关闭当前面板
	! // 将当前面板置于新窗口；即新建一个窗口，其中仅包含当前面板
	Ctrl+方向键 // 以1个单元格为单位移动边缘以调整当前面板大小
	Alt+方向键 // 以5个单元格为单位移动边缘以调整当前面板大小
	Space // 在预置的面板布局中循环切换
	q // 显示面板编号
	o // 在当前窗口中选择下一面板
	{ // 向前置换当前面板
	} // 向后置换当前面板
```


### 3 效率提升

#### 3.1 多服务器同时操作
`[prefix] + [:set synchronize-panes]`可以同步面板输入，方便多台服务器日志查询等

#### 3.2 快捷键修改


set synchronize-panes



















